# Test Mesh Apps

This directory contains **CLI-generated test cases** that validate and demonstrate the automation capabilities of the Isle-Mesh CLI tool.

## Purpose

These test applications are created **using the CLI tool** to:
- Validate CLI automation functionality
- Test different mesh-app configurations
- Provide example outputs for documentation
- Verify end-to-end workflows
- Serve as integration tests for the CLI

## Important Distinction

- **`/mesh-prototypes`**: Hand-crafted prototypes built WITHOUT the CLI (reference implementations)
- **`/test-mesh-apps`** (this directory): Automated test cases built WITH the CLI tool

## Test Cases

Each subdirectory represents a specific test scenario or use case generated by the CLI.

### Naming Convention

Test apps should be named descriptively to indicate what they test:
- `simple-single-service/` - Single service mesh-app
- `multi-service-web-app/` - Three-tier web application
- `microservices-demo/` - Multiple microservices with mTLS
- `env-files-test/` - Testing environment file handling
- `custom-domain-test/` - Testing custom domain configuration

## Creating New Test Cases

All test apps in this directory should be generated using the CLI:

```bash
# Navigate to test-mesh-apps directory
cd test-mesh-apps

# Create a test case from scratch
mkdir my-test-case
cd my-test-case
isle init -d testapp.local

# Or convert an existing docker-compose
isle init -f path/to/docker-compose.yml -d testapp.local
```

## Testing Workflow

1. **Create test case**
   ```bash
   cd test-mesh-apps/new-test
   isle init
   ```

2. **Verify generated files**
   ```bash
   ls -la
   cat setup.yml
   cat docker-compose.mesh-app.yml
   ```

3. **Test functionality**
   ```bash
   isle up
   isle ps
   isle logs
   isle down
   ```

4. **Document results**
   - Add a README.md in the test case directory
   - Document what was tested
   - Note any issues or observations

## Test Coverage Goals

- [ ] Single service application
- [ ] Multi-service web app (frontend, backend, database)
- [ ] Microservices with mTLS
- [ ] Environment file handling
- [ ] Custom domains
- [ ] SSL certificate generation
- [ ] Nginx proxy configuration
- [ ] Multiple docker-compose files (selection workflow)
- [ ] Project switching (isle config)
- [ ] Service management (up/down/logs/ps)

## Automated Testing

These test cases can be used for automated CLI testing:

```bash
# Run all test cases
for dir in test-mesh-apps/*/; do
  echo "Testing: $dir"
  cd "$dir"
  isle config set-project .
  isle up
  isle ps
  isle down
  cd -
done
```

## Notes

- Keep test cases focused on specific functionality
- Include both positive and edge case tests
- Document expected vs actual behavior
- Clean up regularly: `isle prune -f`
- Don't commit large generated files (add to .gitignore if needed)

## Related

- See `/mesh-prototypes` for hand-crafted reference implementations
- See `/isle-cli` for CLI source code
- See `GETTING-STARTED.md` for CLI usage guide
